{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed } from 'vue';\nimport { chatWithAI } from '../services/openai';\nexport default {\n  __name: 'AiAssistant',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const aiMessages = ref([{\n      type: 'ai',\n      content: '‰Ω†Â•ΩÔºÅÊàëÊòØ‰Ω†ÁöÑAIÁæéÈ£üÂä©ÊâãÔºåÂèØ‰ª•Â∏Æ‰Ω†Êé®ËçêÈ§êÂéÖ„ÄÅËèúÂìÅÔºåÊàñËÄÖÂõûÁ≠î‰ªª‰ΩïÂÖ≥‰∫éÁæéÈ£üÁöÑÈóÆÈ¢ò„ÄÇÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÂêóÔºü'\n    }]);\n    const aiInput = ref('');\n    const isLoading = ref(false);\n    const conversationHistory = computed(() => {\n      return aiMessages.value.filter(msg => msg.type !== 'loading').map(msg => ({\n        role: msg.type === 'user' ? 'user' : 'assistant',\n        content: msg.content\n      })).slice(1);\n    });\n    const sendAIMessage = async () => {\n      if (!aiInput.value.trim() || isLoading.value) return;\n      const userMessage = aiInput.value.trim();\n      aiInput.value = '';\n      aiMessages.value.push({\n        type: 'user',\n        content: userMessage\n      });\n      const loadingMessageIndex = aiMessages.value.length;\n      aiMessages.value.push({\n        type: 'loading',\n        content: ''\n      });\n      isLoading.value = true;\n      try {\n        const response = await chatWithAI(userMessage, conversationHistory.value);\n        aiMessages.value.splice(loadingMessageIndex, 1, {\n          type: 'ai',\n          content: response\n        });\n      } catch (error) {\n        aiMessages.value.splice(loadingMessageIndex, 1, {\n          type: 'ai',\n          content: `Êä±Ê≠âÔºåÊàëÈÅáÂà∞‰∫Ü‰∏Ä‰∫õÈóÆÈ¢òÔºö${error.message}„ÄÇËØ∑Á®çÂêéÂÜçËØïÔºåÊàñËÄÖÊ£ÄÊü•ÁΩëÁªúËøûÊé•„ÄÇ`\n        });\n        console.error('AI ÂØπËØùÈîôËØØ:', error);\n      } finally {\n        isLoading.value = false;\n        setTimeout(() => {\n          const chatContainer = document.querySelector('.overflow-y-auto');\n          if (chatContainer) {\n            chatContainer.scrollTop = chatContainer.scrollHeight;\n          }\n        }, 100);\n      }\n    };\n    const __returned__ = {\n      aiMessages,\n      aiInput,\n      isLoading,\n      conversationHistory,\n      sendAIMessage,\n      ref,\n      computed,\n      get chatWithAI() {\n        return chatWithAI;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","chatWithAI","aiMessages","type","content","aiInput","isLoading","conversationHistory","value","filter","msg","map","role","slice","sendAIMessage","trim","userMessage","push","loadingMessageIndex","length","response","splice","error","message","console","setTimeout","chatContainer","document","querySelector","scrollTop","scrollHeight"],"sources":["/Users/leon/Desktop/Code/‰Ωú‰∏ö/webÂºÄÂèë/vue/my-food/src/components/AiAssistant.vue"],"sourcesContent":["<template>\n  <div class=\"space-y-6\">\n    <div class=\"bg-gradient-to-br from-blue-900/20 to-purple-900/20 rounded-2xl p-8 border border-white/10\">\n      <h2 class=\"text-3xl font-bold mb-6 flex items-center gap-3\">\n        <span class=\"text-4xl\">ü§ñ</span>\n        AI Êô∫ËÉΩÂä©Êâã\n      </h2>\n\n      <!-- ËÅäÂ§©Âå∫Âüü -->\n      <div class=\"bg-[#0D121F] rounded-xl p-6 h-[500px] overflow-y-auto mb-4 space-y-4\">\n        <div\n          v-for=\"(message, index) in aiMessages\"\n          :key=\"index\"\n          class=\"flex\"\n          :class=\"message.type === 'user' ? 'justify-end' : 'justify-start'\"\n        >\n          <div\n            class=\"max-w-[80%] rounded-2xl p-4\"\n            :class=\"message.type === 'user'\n              ? 'bg-blue-600/30 text-white'\n              : 'bg-gray-800/50 text-gray-200'\"\n          >\n            <div class=\"flex items-start gap-3\">\n              <span v-if=\"message.type === 'ai'\" class=\"text-2xl\">ü§ñ</span>\n              <div class=\"flex-1\">\n                <p class=\"text-sm mb-1 opacity-70\">\n                  {{ message.type === 'user' ? '‰Ω†' : 'AIÂä©Êâã' }}\n                </p>\n                <p v-if=\"message.type !== 'loading'\" class=\"whitespace-pre-wrap\">\n                  {{ message.content }}\n                </p>\n                <div v-else class=\"flex items-center gap-2\">\n                  <div class=\"flex gap-1\">\n                    <div\n                      class=\"w-2 h-2 bg-blue-400 rounded-full animate-bounce\"\n                      style=\"animation-delay: 0s\"\n                    ></div>\n                    <div\n                      class=\"w-2 h-2 bg-blue-400 rounded-full animate-bounce\"\n                      style=\"animation-delay: 0.2s\"\n                    ></div>\n                    <div\n                      class=\"w-2 h-2 bg-blue-400 rounded-full animate-bounce\"\n                      style=\"animation-delay: 0.4s\"\n                    ></div>\n                  </div>\n                  <span class=\"text-sm text-gray-400\">AI Ê≠£Âú®ÊÄùËÄÉ...</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- ËæìÂÖ•Ê°Ü -->\n      <div class=\"flex gap-3\">\n        <input\n          v-model=\"aiInput\"\n          @keyup.enter=\"!isLoading && sendAIMessage()\"\n          :disabled=\"isLoading\"\n          type=\"text\"\n          placeholder=\"ÈóÆÊàë‰ªª‰ΩïÂÖ≥‰∫éÁæéÈ£üÁöÑÈóÆÈ¢ò...\"\n          class=\"flex-1 bg-gray-800 border border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n        />\n        <button\n          @click=\"sendAIMessage\"\n          :disabled=\"isLoading || !aiInput.trim()\"\n          class=\"px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-xl font-medium transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n        >\n          <span v-if=\"!isLoading\">ÂèëÈÄÅ</span>\n          <span v-else class=\"flex items-center gap-2\">\n            <svg\n              class=\"animate-spin h-4 w-4\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n            >\n              <circle\n                class=\"opacity-25\"\n                cx=\"12\"\n                cy=\"12\"\n                r=\"10\"\n                stroke=\"currentColor\"\n                stroke-width=\"4\"\n              ></circle>\n              <path\n                class=\"opacity-75\"\n                fill=\"currentColor\"\n                d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n              ></path>\n            </svg>\n            ÂèëÈÄÅ‰∏≠...\n          </span>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { chatWithAI } from '../services/openai'\n\nconst aiMessages = ref([\n  {\n    type: 'ai',\n    content:\n      '‰Ω†Â•ΩÔºÅÊàëÊòØ‰Ω†ÁöÑAIÁæéÈ£üÂä©ÊâãÔºåÂèØ‰ª•Â∏Æ‰Ω†Êé®ËçêÈ§êÂéÖ„ÄÅËèúÂìÅÔºåÊàñËÄÖÂõûÁ≠î‰ªª‰ΩïÂÖ≥‰∫éÁæéÈ£üÁöÑÈóÆÈ¢ò„ÄÇÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÂêóÔºü',\n  },\n])\n\nconst aiInput = ref('')\nconst isLoading = ref(false)\n\nconst conversationHistory = computed(() => {\n  return aiMessages.value\n    .filter((msg) => msg.type !== 'loading')\n    .map((msg) => ({\n      role: msg.type === 'user' ? 'user' : 'assistant',\n      content: msg.content,\n    }))\n    .slice(1)\n})\n\nconst sendAIMessage = async () => {\n  if (!aiInput.value.trim() || isLoading.value) return\n\n  const userMessage = aiInput.value.trim()\n  aiInput.value = ''\n\n  aiMessages.value.push({\n    type: 'user',\n    content: userMessage,\n  })\n\n  const loadingMessageIndex = aiMessages.value.length\n  aiMessages.value.push({\n    type: 'loading',\n    content: '',\n  })\n\n  isLoading.value = true\n\n  try {\n    const response = await chatWithAI(userMessage, conversationHistory.value)\n\n    aiMessages.value.splice(loadingMessageIndex, 1, {\n      type: 'ai',\n      content: response,\n    })\n  } catch (error) {\n    aiMessages.value.splice(loadingMessageIndex, 1, {\n      type: 'ai',\n      content: `Êä±Ê≠âÔºåÊàëÈÅáÂà∞‰∫Ü‰∏Ä‰∫õÈóÆÈ¢òÔºö${error.message}„ÄÇËØ∑Á®çÂêéÂÜçËØïÔºåÊàñËÄÖÊ£ÄÊü•ÁΩëÁªúËøûÊé•„ÄÇ`,\n    })\n    console.error('AI ÂØπËØùÈîôËØØ:', error)\n  } finally {\n    isLoading.value = false\n\n    setTimeout(() => {\n      const chatContainer = document.querySelector('.overflow-y-auto')\n      if (chatContainer) {\n        chatContainer.scrollTop = chatContainer.scrollHeight\n      }\n    }, 100)\n  }\n}\n</script>\n\n\n"],"mappings":";;;;AAoGA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAI;AAClC,SAASC,UAAU,QAAQ,oBAAmB;;;;;;;IAE9C,MAAMC,UAAU,GAAGH,GAAG,CAAC,CACrB;MACEI,IAAI,EAAE,IAAI;MACVC,OAAO,EACL;IACJ,CAAC,CACF;IAED,MAAMC,OAAO,GAAGN,GAAG,CAAC,EAAE;IACtB,MAAMO,SAAS,GAAGP,GAAG,CAAC,KAAK;IAE3B,MAAMQ,mBAAmB,GAAGP,QAAQ,CAAC,MAAM;MACzC,OAAOE,UAAU,CAACM,KAAI,CACnBC,MAAM,CAAEC,GAAG,IAAKA,GAAG,CAACP,IAAI,KAAK,SAAS,EACtCQ,GAAG,CAAED,GAAG,KAAM;QACbE,IAAI,EAAEF,GAAG,CAACP,IAAI,KAAK,MAAM,GAAG,MAAM,GAAG,WAAW;QAChDC,OAAO,EAAEM,GAAG,CAACN;MACf,CAAC,CAAC,EACDS,KAAK,CAAC,CAAC;IACZ,CAAC;IAED,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI,CAACT,OAAO,CAACG,KAAK,CAACO,IAAI,CAAC,CAAC,IAAIT,SAAS,CAACE,KAAK,EAAE;MAE9C,MAAMQ,WAAW,GAAGX,OAAO,CAACG,KAAK,CAACO,IAAI,CAAC;MACvCV,OAAO,CAACG,KAAK,GAAG,EAAC;MAEjBN,UAAU,CAACM,KAAK,CAACS,IAAI,CAAC;QACpBd,IAAI,EAAE,MAAM;QACZC,OAAO,EAAEY;MACX,CAAC;MAED,MAAME,mBAAmB,GAAGhB,UAAU,CAACM,KAAK,CAACW,MAAK;MAClDjB,UAAU,CAACM,KAAK,CAACS,IAAI,CAAC;QACpBd,IAAI,EAAE,SAAS;QACfC,OAAO,EAAE;MACX,CAAC;MAEDE,SAAS,CAACE,KAAK,GAAG,IAAG;MAErB,IAAI;QACF,MAAMY,QAAQ,GAAG,MAAMnB,UAAU,CAACe,WAAW,EAAET,mBAAmB,CAACC,KAAK;QAExEN,UAAU,CAACM,KAAK,CAACa,MAAM,CAACH,mBAAmB,EAAE,CAAC,EAAE;UAC9Cf,IAAI,EAAE,IAAI;UACVC,OAAO,EAAEgB;QACX,CAAC;MACH,CAAC,CAAC,OAAOE,KAAK,EAAE;QACdpB,UAAU,CAACM,KAAK,CAACa,MAAM,CAACH,mBAAmB,EAAE,CAAC,EAAE;UAC9Cf,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE,eAAekB,KAAK,CAACC,OAAO;QACvC,CAAC;QACDC,OAAO,CAACF,KAAK,CAAC,UAAU,EAAEA,KAAK;MACjC,CAAC,SAAS;QACRhB,SAAS,CAACE,KAAK,GAAG,KAAI;QAEtBiB,UAAU,CAAC,MAAM;UACf,MAAMC,aAAa,GAAGC,QAAQ,CAACC,aAAa,CAAC,kBAAkB;UAC/D,IAAIF,aAAa,EAAE;YACjBA,aAAa,CAACG,SAAS,GAAGH,aAAa,CAACI,YAAW;UACrD;QACF,CAAC,EAAE,GAAG;MACR;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}