{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport { ref, computed } from 'vue';\n\n// 1. Êé•Êî∂Áà∂ÁªÑ‰ª∂‰º†ÂÖ•ÁöÑÊâÄÊúâÂ∫óÈì∫Êï∞ÊçÆ\n\nexport default {\n  __name: 'FoodWaterfall',\n  props: {\n    shops: {\n      type: Array,\n      default: () => []\n    }\n  },\n  emits: ['checkout'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n\n    /* eslint-disable no-undef */\n    const props = __props;\n    const emit = __emit;\n\n    // Áä∂ÊÄÅÁÆ°ÁêÜ\n    const currentShop = ref(null); // ÂΩìÂâçÈÄâ‰∏≠ÁöÑÂ∫óÈì∫Ôºånull Ë°®Á§∫Âú®ÂàóË°®È°µ\n    const shopSearch = ref('');\n    const cart = ref({}); // Ë¥≠Áâ©ËΩ¶ { foodId: quantity }\n\n    // --- Â∫óÈì∫ÂàóË°®ÈÄªËæë ---\n    const filteredShops = computed(() => {\n      if (!shopSearch.value) return props.shops;\n      return props.shops.filter(s => s.name.includes(shopSearch.value) || s.tags.includes(shopSearch.value));\n    });\n    const enterShop = shop => {\n      currentShop.value = shop;\n      cart.value = {}; // ËøõÊñ∞Â∫óÊ∏ÖÁ©∫Ë¥≠Áâ©ËΩ¶ÔºàÁÆÄÂåñÈÄªËæëÔºâ\n    };\n    const exitShop = () => {\n      currentShop.value = null;\n      cart.value = {};\n    };\n\n    // --- Ë¥≠Áâ©ËΩ¶ÈÄªËæë (‰ªÖÈíàÂØπ currentShop.menu) ---\n    const getCartCount = id => cart.value[id] || 0;\n    const updateCart = (food, change) => {\n      const current = cart.value[food.id] || 0;\n      const newCount = current + change;\n      if (newCount <= 0) delete cart.value[food.id];else cart.value[food.id] = newCount;\n    };\n    const totalCartCount = computed(() => Object.values(cart.value).reduce((a, b) => a + b, 0));\n    const totalCartPrice = computed(() => {\n      if (!currentShop.value) return 0;\n      let total = 0;\n      for (const [id, count] of Object.entries(cart.value)) {\n        const food = currentShop.value.menu.find(f => f.id == id);\n        if (food) total += food.currentPrice * count;\n      }\n      return total;\n    });\n    const checkoutCart = () => {\n      if (!currentShop.value) return;\n\n      // ÁîüÊàêËÆ¢Âçï‰ø°ÊÅØ\n      const itemIds = Object.keys(cart.value);\n      const firstItem = currentShop.value.menu.find(f => f.id == itemIds[0]);\n      const orderName = totalCartCount.value > 1 ? `${currentShop.value.name}Ôºö${firstItem.name} Á≠â` : `${currentShop.value.name}Ôºö${firstItem.name}`;\n      const orderData = {\n        id: Date.now(),\n        name: orderName,\n        price: totalCartPrice.value,\n        date: new Date().toLocaleDateString(),\n        icon: 'üõçÔ∏è'\n      };\n      emit('checkout', orderData);\n      // ÁªìÁÆóÂêéÈÄÄÂá∫Â∫óÈì∫ÊàñÊ∏ÖÁ©∫Ë¥≠Áâ©ËΩ¶\n      cart.value = {};\n      currentShop.value = null;\n    };\n    const __returned__ = {\n      props,\n      emit,\n      currentShop,\n      shopSearch,\n      cart,\n      filteredShops,\n      enterShop,\n      exitShop,\n      getCartCount,\n      updateCart,\n      totalCartCount,\n      totalCartPrice,\n      checkoutCart,\n      ref,\n      computed\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","props","__props","emit","__emit","currentShop","shopSearch","cart","filteredShops","value","shops","filter","s","name","includes","tags","enterShop","shop","exitShop","getCartCount","id","updateCart","food","change","current","newCount","totalCartCount","Object","values","reduce","a","b","totalCartPrice","total","count","entries","menu","find","f","currentPrice","checkoutCart","itemIds","keys","firstItem","orderName","orderData","Date","now","price","date","toLocaleDateString","icon"],"sources":["/Users/leon/Desktop/Code/‰Ωú‰∏ö/webÂºÄÂèë/vue/my-food/src/components/FoodWaterfall.vue"],"sourcesContent":["<template>\n  <div class=\"space-y-6\">\n    \n    <div v-if=\"!currentShop\" class=\"animate-fade-in\">\n      <div class=\"sticky top-20 z-30 bg-[#0B0F19]/90 backdrop-blur py-2 mb-6\">\n        <div class=\"relative\">\n          <input \n            v-model=\"shopSearch\"\n            type=\"text\" \n            placeholder=\"üîç ÊêúÂ∫óÈì∫...\"\n            class=\"w-full bg-gray-900 border border-white/10 rounded-xl pl-12 pr-4 py-3 focus:border-blue-500 focus:outline-none transition-colors text-sm\"\n          >\n          <span class=\"absolute left-4 top-1/2 -translate-y-1/2 text-xl\">üè™</span>\n        </div>\n      </div>\n\n      <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div \n          v-for=\"shop in filteredShops\" \n          :key=\"shop.id\"\n          @click=\"enterShop(shop)\"\n          class=\"bg-gray-900/50 border border-white/10 rounded-2xl overflow-hidden hover:border-blue-500/50 transition cursor-pointer group relative\"\n        >\n          <div class=\"h-48 w-full bg-gray-800 relative overflow-hidden\">\n             <img v-if=\"shop.image\" :src=\"shop.image\" class=\"w-full h-full object-cover group-hover:scale-105 transition duration-700\">\n             <div v-else class=\"w-full h-full flex items-center justify-center text-4xl bg-gradient-to-br from-blue-900 to-purple-900\">üè™</div>\n             <div class=\"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent\"></div>\n             \n             <div class=\"absolute bottom-4 left-4 right-4\">\n               <h3 class=\"text-xl font-bold text-white mb-1\">{{ shop.name }}</h3>\n               <div class=\"flex items-center gap-2 text-xs\">\n                 <span class=\"text-yellow-400 font-bold\">‚≠ê {{ shop.rating }}</span>\n                 <span class=\"text-gray-400\">| ÊúàÂîÆ {{ shop.sales }}+</span>\n               </div>\n             </div>\n          </div>\n          \n          <div class=\"p-4 flex flex-wrap gap-2\">\n            <span v-for=\"tag in shop.tags\" :key=\"tag\" class=\"px-2 py-1 bg-white/5 rounded text-xs text-gray-400 border border-white/5\">\n              {{ tag }}\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div v-else class=\"animate-slide-up\">\n      <div class=\"flex items-center gap-4 mb-6 sticky top-20 z-40 bg-[#0B0F19]/95 py-2 border-b border-white/10\">\n        <button @click=\"exitShop\" class=\"w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center hover:bg-gray-700 transition\">\n          ‚Üê\n        </button>\n        <div>\n          <h2 class=\"font-bold text-lg leading-tight\">{{ currentShop.name }}</h2>\n          <p class=\"text-xs text-gray-500\">Ê≠£Âú®ÁÇπÈ§ê</p>\n        </div>\n      </div>\n\n      <div class=\"bg-gradient-to-r from-blue-900/40 to-purple-900/40 border border-blue-500/30 rounded-xl p-4 flex items-center justify-between mb-6\">\n        <div class=\"flex items-center gap-3\">\n          <div class=\"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-xl animate-pulse\">ü§ñ</div>\n          <div>\n            <h3 class=\"font-bold text-blue-200\">AI ËøõÂ∫óÊé®Ëçê</h3>\n            <p class=\"text-xs text-gray-400\">ËøôÂÆ∂Â∫óÁöÑÊãõÁâåËèúÂæàÈÄÇÂêà‰Ω†ÁöÑÂè£Âë≥ÔºÅ</p>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n        <div v-for=\"food in currentShop.menu\" :key=\"food.id\" class=\"bg-gray-900/50 border border-white/10 rounded-xl overflow-hidden food-card-hover group relative flex flex-col\">\n          <div v-if=\"food.aiReason\" class=\"absolute top-2 left-2 right-2 z-10\">\n             <div class=\"bg-black/60 backdrop-blur-md border border-blue-500/30 text-blue-300 text-xs px-3 py-2 rounded-lg shadow-lg flex items-start gap-2\">\n               <span class=\"text-base\">üí°</span><span>{{ food.aiReason }}</span>\n             </div>\n          </div>\n          <div class=\"h-40 w-full bg-gradient-to-br from-gray-800 to-gray-700 flex items-center justify-center relative overflow-hidden\">\n             <span class=\"text-6xl transform group-hover:scale-110 transition duration-500\">{{ food.icon }}</span>\n          </div>\n          <div class=\"p-4 flex-1 flex flex-col\">\n             <div class=\"flex justify-between items-start mb-2\">\n                <h3 class=\"font-bold text-lg text-white truncate\">{{ food.name }}</h3>\n                <div class=\"text-right\">\n                  <span class=\"block text-xs text-gray-500\">ÈîÄÈáè {{ food.sales }}</span>\n                </div>\n             </div>\n             <p class=\"text-gray-500 text-xs mb-4 line-clamp-2 flex-1\">{{ food.description }}</p>\n             <div class=\"mt-auto flex items-end justify-between border-t border-white/5 pt-3\">\n                <div class=\"flex items-baseline gap-2\">\n                  <span class=\"text-xl font-bold text-red-400\">¬•{{ food.currentPrice }}</span>\n                  <span v-if=\"food.originalPrice\" class=\"text-xs text-gray-600 line-through decoration-gray-500\">¬•{{ food.originalPrice }}</span>\n                </div>\n                \n                <div v-if=\"getCartCount(food.id) > 0\" class=\"flex items-center gap-3 bg-gray-800 rounded-lg px-2 py-1\">\n                   <button @click=\"updateCart(food, -1)\" class=\"text-gray-400 hover:text-white font-bold px-1\">-</button>\n                   <span class=\"text-sm font-bold text-white\">{{ getCartCount(food.id) }}</span>\n                   <button @click=\"updateCart(food, 1)\" class=\"text-blue-400 hover:text-blue-300 font-bold px-1\">+</button>\n                </div>\n                <button v-else @click=\"updateCart(food, 1)\" class=\"bg-blue-600 hover:bg-blue-500 text-white p-2 rounded-lg shadow-lg shadow-blue-900/20 transition\">\n                   <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"/></svg>\n                </button>\n             </div>\n          </div>\n        </div>\n      </div>\n      \n      <div v-if=\"totalCartCount > 0\" class=\"fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-md bg-[#1A1F2E] border border-blue-500/30 rounded-full p-2 pr-6 shadow-2xl shadow-blue-900/30 flex items-center justify-between z-50 backdrop-blur-md\">\n        <div class=\"flex items-center gap-4\">\n          <div class=\"bg-blue-600 text-white w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg relative\">\n            üõí\n            <span class=\"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-5 h-5 rounded-full flex items-center justify-center border-2 border-[#1A1F2E]\">{{ totalCartCount }}</span>\n          </div>\n          <div>\n            <p class=\"text-white font-bold text-lg\">¬•{{ totalCartPrice }}</p>\n            <p class=\"text-xs text-gray-400\">È¢ÑËÆ° 25 ÂàÜÈíüÂêéÈÄÅËææ</p>\n          </div>\n        </div>\n        <button @click=\"checkoutCart\" class=\"text-blue-400 font-bold text-sm hover:text-white transition\">ÂéªÁªìÁÆó ></button>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script setup>\n/* eslint-disable no-undef */\nimport { ref, computed } from 'vue'\n\n// 1. Êé•Êî∂Áà∂ÁªÑ‰ª∂‰º†ÂÖ•ÁöÑÊâÄÊúâÂ∫óÈì∫Êï∞ÊçÆ\nconst props = defineProps({\n  shops: {\n    type: Array,\n    default: () => []\n  }\n})\n\nconst emit = defineEmits(['checkout'])\n\n// Áä∂ÊÄÅÁÆ°ÁêÜ\nconst currentShop = ref(null) // ÂΩìÂâçÈÄâ‰∏≠ÁöÑÂ∫óÈì∫Ôºånull Ë°®Á§∫Âú®ÂàóË°®È°µ\nconst shopSearch = ref('')\nconst cart = ref({}) // Ë¥≠Áâ©ËΩ¶ { foodId: quantity }\n\n// --- Â∫óÈì∫ÂàóË°®ÈÄªËæë ---\nconst filteredShops = computed(() => {\n  if (!shopSearch.value) return props.shops\n  return props.shops.filter(s => s.name.includes(shopSearch.value) || s.tags.includes(shopSearch.value))\n})\n\nconst enterShop = (shop) => {\n  currentShop.value = shop\n  cart.value = {} // ËøõÊñ∞Â∫óÊ∏ÖÁ©∫Ë¥≠Áâ©ËΩ¶ÔºàÁÆÄÂåñÈÄªËæëÔºâ\n}\n\nconst exitShop = () => {\n  currentShop.value = null\n  cart.value = {}\n}\n\n// --- Ë¥≠Áâ©ËΩ¶ÈÄªËæë (‰ªÖÈíàÂØπ currentShop.menu) ---\nconst getCartCount = (id) => cart.value[id] || 0\n\nconst updateCart = (food, change) => {\n  const current = cart.value[food.id] || 0\n  const newCount = current + change\n  if (newCount <= 0) delete cart.value[food.id]\n  else cart.value[food.id] = newCount\n}\n\nconst totalCartCount = computed(() => Object.values(cart.value).reduce((a, b) => a + b, 0))\n\nconst totalCartPrice = computed(() => {\n  if (!currentShop.value) return 0\n  let total = 0\n  for (const [id, count] of Object.entries(cart.value)) {\n    const food = currentShop.value.menu.find(f => f.id == id)\n    if (food) total += food.currentPrice * count\n  }\n  return total\n})\n\nconst checkoutCart = () => {\n  if (!currentShop.value) return\n  \n  // ÁîüÊàêËÆ¢Âçï‰ø°ÊÅØ\n  const itemIds = Object.keys(cart.value)\n  const firstItem = currentShop.value.menu.find(f => f.id == itemIds[0])\n  const orderName = totalCartCount.value > 1 \n    ? `${currentShop.value.name}Ôºö${firstItem.name} Á≠â` \n    : `${currentShop.value.name}Ôºö${firstItem.name}`\n\n  const orderData = {\n    id: Date.now(),\n    name: orderName,\n    price: totalCartPrice.value,\n    date: new Date().toLocaleDateString(),\n    icon: 'üõçÔ∏è'\n  }\n\n  emit('checkout', orderData)\n  // ÁªìÁÆóÂêéÈÄÄÂá∫Â∫óÈì∫ÊàñÊ∏ÖÁ©∫Ë¥≠Áâ©ËΩ¶\n  cart.value = {}\n  currentShop.value = null\n}\n</script>\n\n<style scoped>\n.animate-fade-in {\n  animation: fadeIn 0.5s ease-out;\n}\n.animate-slide-up {\n  animation: slideUp 0.3s ease-out;\n}\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n@keyframes slideUp {\n  from { transform: translateY(20px); opacity: 0; }\n  to { transform: translateY(0); opacity: 1; }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}